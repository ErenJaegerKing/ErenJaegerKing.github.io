---
icon: ""
description: ""
title: "并发编程"
date: 2024-09-23
category:
  - Java
tag:
  - JUC
order: 1
---

## 线程
### 什么是线程和进程？

何为进程？进程是程序的一次执行过程，是系统运行程序的基本单位。比如说在windows系统上查询任务管理器，就可以看到.exe运行的进程

何为线程？一个进程在其执行的过程中可以产生多个线程。与线程不同的就是同类的多个线程共享进程中的堆和方法去的资源，但每个线程都有自己的程序计数器、虚拟机栈和本地方法栈。

### Java 线程和操作系统的线程有啥区别？

现在的 Java 线程的本质其实就是操作系统的线程。

### 请简要描述线程与进程的关系,区别及优缺点？

一个进程中可以有多个线程，多个线程共享进程中的堆和方法区（JDK1.8之后的元空间）资源，但是每个线程都有自己的虚拟机栈、程序计数器和本地方法栈

总结：线程是进程划分成的更小的运行单位。线程和进程最大的不同在于基本上各进程是独立的，而各线程则不一定，因为同一个进程的线程极有可能相互影响。

### 如何创建线程？

- 继承Thread类
- 实现Runnable接口
- 实现Callable接口
- 使用线程池
- 使用CompletableFuture

严格来说，java只有一种方式可以创建线程，那就是通过new Thread().start()创建。不管是哪种方法，最终都依赖于new Thread().start()

### 说说线程的生命周期和状态

new初始化状态 
runnable运行状态 调用start()等待运行的状态
blocked阻塞状态 需要等待锁释放
waiting等待状态 需要等待其他线程做出一些反应（通知或中断）
time_waiting超时等待状态 在等待指定时间自行返回而不是像waiting那样一直等待
terminated终止状态 线程已经运行完毕

### 什么是线程上下文切换?

线程切换意味需要保存当前线程的上下文，留待线程下次占用CPU的时候恢复现场。并加载下一个将要占用CPU的线程上下文。这就是所谓的上下文切换。

### Thread#sleep() 方法和 Object#wait() 方法对比

共同点：两者都可以暂停线程的执行。

区别：
- wait方法释放了锁 sleep方法没有释放锁
- wait通常用于线程间交互/通信 sleep暂停执行
- wait被调用后，线程不会自动苏醒，需要别的线程调用同一个对象的notify或notifyAll sleep执行完成后，线程自动苏醒，或者wait（long timeout）超时后线程会自动苏醒
- wait是object本地方法，sleep是thread类的静态本地方法

### 为什么 wait() 方法不定义在 Thread 中？

wait是为获得对象锁的线程实现等待，会自动释放当前线程占有的对象锁。每个对象中都有对象锁，所以放在object中

sleep只是暂停线程，所以就放在thread中

### 可以直接调用 Thread 类的 run 方法吗？

不可以，调用start方法可启动线程并使线程进入就绪状态，直接运行run方法的话不会以多线程的方式执行。




