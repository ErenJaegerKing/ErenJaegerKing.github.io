<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.15" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.52" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://ErenJaegerKing.github.io/notes/devops/%E5%AE%B9%E5%99%A8%E5%8C%96%E3%80%81%E7%BC%96%E6%8E%92/docker_note.html"><meta property="og:site_name" content="ErenJaeger"><meta property="og:title" content="Docker学校课堂笔记"><meta property="og:description" content="相关信息 这是我学校课程的课堂笔记，很详细 1.简介 Docker是一个开源的应用容器引擎 诞生于2013年初，基于Go语言实现，dotCloud公司出品（后改名为Docker inc） Docker可以让开发者打包他们的应用以及依赖包到一个轻量级、可移植的容器中，然后发布到任何流行的Linux机器上； 容器是完全使用沙箱机制，相互隔离 容器性能开销极..."><meta property="og:type" content="article"><meta property="og:image" content="https://drawingbed-686.pages.dev/myblog/202409241259032.png"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2024-10-10T07:58:23.000Z"><meta property="article:author" content="ErenJaegerKing"><meta property="article:tag" content="Docker"><meta property="article:published_time" content="2024-09-24T00:00:00.000Z"><meta property="article:modified_time" content="2024-10-10T07:58:23.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Docker学校课堂笔记","image":["https://drawingbed-686.pages.dev/myblog/202409241259032.png","https://drawingbed-686.pages.dev/myblog/202409241313200.png","https://drawingbed-686.pages.dev/myblog/202409241323412.png","https://drawingbed-686.pages.dev/myblog/202409241335679.png","https://drawingbed-686.pages.dev/myblog/202409241340557.png","https://drawingbed-686.pages.dev/myblog/202409241339167.png"],"datePublished":"2024-09-24T00:00:00.000Z","dateModified":"2024-10-10T07:58:23.000Z","author":[{"@type":"Person","name":"ErenJaegerKing","url":"https://ErenJaegerKing.github.io","email":"erenjaegerking@qq.com"}]}</script><link rel="icon" href="/favicon1.ico"><title>Docker学校课堂笔记 | ErenJaeger</title><meta name="description" content="相关信息 这是我学校课程的课堂笔记，很详细 1.简介 Docker是一个开源的应用容器引擎 诞生于2013年初，基于Go语言实现，dotCloud公司出品（后改名为Docker inc） Docker可以让开发者打包他们的应用以及依赖包到一个轻量级、可移植的容器中，然后发布到任何流行的Linux机器上； 容器是完全使用沙箱机制，相互隔离 容器性能开销极...">
    <link rel="preload" href="/assets/style-B4gLsrtx.css" as="style"><link rel="stylesheet" href="/assets/style-B4gLsrtx.css">
    <link rel="modulepreload" href="/assets/app-DtXSeWwn.js"><link rel="modulepreload" href="/assets/docker_note.html-DGPLWbsU.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-DlAUqK2U.js">
    <link rel="prefetch" href="/assets/index.html-B0RZOh9x.js" as="script"><link rel="prefetch" href="/assets/intro.html-CRnO9sH-.js" as="script"><link rel="prefetch" href="/assets/index.html-4B7a6VV9.js" as="script"><link rel="prefetch" href="/assets/disable.html-BDLnBgHy.js" as="script"><link rel="prefetch" href="/assets/encrypt.html-aU9i-uee.js" as="script"><link rel="prefetch" href="/assets/layout.html-CBDdRrPf.js" as="script"><link rel="prefetch" href="/assets/markdown.html-clLmb4aj.js" as="script"><link rel="prefetch" href="/assets/page.html-DtDrb752.js" as="script"><link rel="prefetch" href="/assets/index.html-D9imgcs4.js" as="script"><link rel="prefetch" href="/assets/index.html-C1_paXDl.js" as="script"><link rel="prefetch" href="/assets/index.html-BazzhA1a.js" as="script"><link rel="prefetch" href="/assets/alibabaStandard.html-B2H4YHHE.js" as="script"><link rel="prefetch" href="/assets/demandComplete.html-DTS98U39.js" as="script"><link rel="prefetch" href="/assets/git.html-DvvZFHNO.js" as="script"><link rel="prefetch" href="/assets/systemDesign.html-BmWG7kuB.js" as="script"><link rel="prefetch" href="/assets/index.html-DDDWLfwV.js" as="script"><link rel="prefetch" href="/assets/index.html-CqLwb4d3.js" as="script"><link rel="prefetch" href="/assets/index.html-ajCF6TpG.js" as="script"><link rel="prefetch" href="/assets/index.html-298vKJ6D.js" as="script"><link rel="prefetch" href="/assets/index.html-BoMYR687.js" as="script"><link rel="prefetch" href="/assets/index.html-DrlfoLTo.js" as="script"><link rel="prefetch" href="/assets/index.html-BHFWomiQ.js" as="script"><link rel="prefetch" href="/assets/index.html-5scLIsUy.js" as="script"><link rel="prefetch" href="/assets/base1.html-BUvADMUb.js" as="script"><link rel="prefetch" href="/assets/base2.html-DxFJXlkh.js" as="script"><link rel="prefetch" href="/assets/index.html-BG-DeyAQ.js" as="script"><link rel="prefetch" href="/assets/advance1.html-r3weucdQ.js" as="script"><link rel="prefetch" href="/assets/index.html-D3HSQXsE.js" as="script"><link rel="prefetch" href="/assets/juc1.html-BrEVFLgb.js" as="script"><link rel="prefetch" href="/assets/index.html-Dp2Lqqs-.js" as="script"><link rel="prefetch" href="/assets/a_basic.html-DAV9ncQg.js" as="script"><link rel="prefetch" href="/assets/b_debug.html-CvycuyfJ.js" as="script"><link rel="prefetch" href="/assets/c_advanced.html-nsuJ-I-W.js" as="script"><link rel="prefetch" href="/assets/d_principle.html-_c1X-etI.js" as="script"><link rel="prefetch" href="/assets/index.html-CRbJcQ9l.js" as="script"><link rel="prefetch" href="/assets/Spring Boot.html-0MYgiU2E.js" as="script"><link rel="prefetch" href="/assets/Spring MVC.html-3qCZGdi2.js" as="script"><link rel="prefetch" href="/assets/Spring.html-Co_kOTa1.js" as="script"><link rel="prefetch" href="/assets/BFS 和 DFS(回溯算法) 层序遍历.html-BxUZJzjz.js" as="script"><link rel="prefetch" href="/assets/Markdown语法.html-Dl83MNR_.js" as="script"><link rel="prefetch" href="/assets/index.html-4w5IGY3p.js" as="script"><link rel="prefetch" href="/assets/二叉树基础及常见类型.html-DUbZQG9t.js" as="script"><link rel="prefetch" href="/assets/优先级队列.html-BzXq5B3b.js" as="script"><link rel="prefetch" href="/assets/动归 回溯 DFS算法的区别和联系以树的视角.html-DTSp8sNl.js" as="script"><link rel="prefetch" href="/assets/滑动窗口算法.html-CYim7rzo.js" as="script"><link rel="prefetch" href="/assets/mongodb_note_1.html-CscsLDTY.js" as="script"><link rel="prefetch" href="/assets/xiaolincoding.html-BuCsYkM2.js" as="script"><link rel="prefetch" href="/assets/redis_note_1.html-CyTIxIQm.js" as="script"><link rel="prefetch" href="/assets/redis_note_2.html-BR_kkU7C.js" as="script"><link rel="prefetch" href="/assets/redis_summarization.html-RMNYHwUw.js" as="script"><link rel="prefetch" href="/assets/rabbitmq_note_1.html-CGV8ZzR7.js" as="script"><link rel="prefetch" href="/assets/index.html-BzhlwgmB.js" as="script"><link rel="prefetch" href="/assets/a_basic.html-erSzS8Rk.js" as="script"><link rel="prefetch" href="/assets/b_relation.html-B92HNXXB.js" as="script"><link rel="prefetch" href="/assets/c_principle.html-s1jFs21t.js" as="script"><link rel="prefetch" href="/assets/d_summarization.html-COXyUIqn.js" as="script"><link rel="prefetch" href="/assets/e_interview.html-BpOmj5YP.js" as="script"><link rel="prefetch" href="/assets/index.html-BLyNsXfi.js" as="script"><link rel="prefetch" href="/assets/a_singleton.html-YK6GfjdF.js" as="script"><link rel="prefetch" href="/assets/b_simpleFactory.html-BlMtM_23.js" as="script"><link rel="prefetch" href="/assets/c_factoryMethod.html-EsKsAJAH.js" as="script"><link rel="prefetch" href="/assets/d_abstractFactory.html-BImbGAvN.js" as="script"><link rel="prefetch" href="/assets/e_prototype.html-BUsld1QJ.js" as="script"><link rel="prefetch" href="/assets/f_builder.html-DnRplQea.js" as="script"><link rel="prefetch" href="/assets/index.html-D4wieJi2.js" as="script"><link rel="prefetch" href="/assets/a_agency.html-DAh2RgX3.js" as="script"><link rel="prefetch" href="/assets/b_adapter.html-CVr9etCj.js" as="script"><link rel="prefetch" href="/assets/c_decorator.html-DcJ1I2XW.js" as="script"><link rel="prefetch" href="/assets/d_bridge.html-iZjYSwKL.js" as="script"><link rel="prefetch" href="/assets/e_facade.html-UrrOG1wd.js" as="script"><link rel="prefetch" href="/assets/f_composite.html-Dng5Tnbb.js" as="script"><link rel="prefetch" href="/assets/g_flyWeight.html-ZFYa8Fk4.js" as="script"><link rel="prefetch" href="/assets/index.html-s7Rt8BvO.js" as="script"><link rel="prefetch" href="/assets/a_template.html-Bjh8QYMu.js" as="script"><link rel="prefetch" href="/assets/b_strategy.html-Dw7wXslK.js" as="script"><link rel="prefetch" href="/assets/c_command.html-DWjouq4d.js" as="script"><link rel="prefetch" href="/assets/d_responsibility.html-BY8_oUTn.js" as="script"><link rel="prefetch" href="/assets/e_state.html-C6i76AWG.js" as="script"><link rel="prefetch" href="/assets/f_observer.html-CcDrElYd.js" as="script"><link rel="prefetch" href="/assets/g_mediator.html-CDTeV4uF.js" as="script"><link rel="prefetch" href="/assets/h_iterator.html-Dk2HsYHp.js" as="script"><link rel="prefetch" href="/assets/i_visitor.html-BV9YEQPq.js" as="script"><link rel="prefetch" href="/assets/j_memorandum.html-DmQhxV1X.js" as="script"><link rel="prefetch" href="/assets/k_interpreter.html-ymVhi8r8.js" as="script"><link rel="prefetch" href="/assets/index.html-B1E5x2wI.js" as="script"><link rel="prefetch" href="/assets/docker_compose_note.html-DYWlrogR.js" as="script"><link rel="prefetch" href="/assets/k8s_note.html-CHkFlh-r.js" as="script"><link rel="prefetch" href="/assets/Linux.html-BQfzFfvD.js" as="script"><link rel="prefetch" href="/assets/index.html-CZlxrgta.js" as="script"><link rel="prefetch" href="/assets/Shell.html-BjsrYPOM.js" as="script"><link rel="prefetch" href="/assets/ELK Stack.html-ChQ7bFEn.js" as="script"><link rel="prefetch" href="/assets/index.html-DwfU9TT8.js" as="script"><link rel="prefetch" href="/assets/Jenkins.html-BqgnbNx3.js" as="script"><link rel="prefetch" href="/assets/MySQL部署.html-BD87GxtW.js" as="script"><link rel="prefetch" href="/assets/Nginx.html-D6i2hT2F.js" as="script"><link rel="prefetch" href="/assets/index.html-CcJlUwwI.js" as="script"><link rel="prefetch" href="/assets/共享存储.html-BGZwex14.js" as="script"><link rel="prefetch" href="/assets/负载均衡.html-yYmURpQL.js" as="script"><link rel="prefetch" href="/assets/index.html-MLpTKhEh.js" as="script"><link rel="prefetch" href="/assets/vue1-basic.html-9HJ_0bCP.js" as="script"><link rel="prefetch" href="/assets/vue2-vuessr.html-DnD8nq-S.js" as="script"><link rel="prefetch" href="/assets/index.html-CzslzIlB.js" as="script"><link rel="prefetch" href="/assets/微服务系统学习.html-D-DYpL4J.js" as="script"><link rel="prefetch" href="/assets/index.html-BZKw5YZn.js" as="script"><link rel="prefetch" href="/assets/微服务系统学习.html-D6iZsVy_.js" as="script"><link rel="prefetch" href="/assets/404.html-OG_6B12G.js" as="script"><link rel="prefetch" href="/assets/index.html-B0V_Lsx7.js" as="script"><link rel="prefetch" href="/assets/index.html-DeO8WZD0.js" as="script"><link rel="prefetch" href="/assets/index.html-BNSvZ_9O.js" as="script"><link rel="prefetch" href="/assets/index.html-Bux3F7Qz.js" as="script"><link rel="prefetch" href="/assets/index.html-DAkerPOt.js" as="script"><link rel="prefetch" href="/assets/index.html-Co7a6AWl.js" as="script"><link rel="prefetch" href="/assets/index.html-B2WQDlCJ.js" as="script"><link rel="prefetch" href="/assets/index.html-CijlQLCE.js" as="script"><link rel="prefetch" href="/assets/index.html-DR1bTotJ.js" as="script"><link rel="prefetch" href="/assets/index.html-DPbI0dJD.js" as="script"><link rel="prefetch" href="/assets/index.html-LDS0bp4l.js" as="script"><link rel="prefetch" href="/assets/index.html-BrP6MGvv.js" as="script"><link rel="prefetch" href="/assets/index.html-CXontJtv.js" as="script"><link rel="prefetch" href="/assets/index.html-DAjqlUxo.js" as="script"><link rel="prefetch" href="/assets/index.html-BIf5wcUq.js" as="script"><link rel="prefetch" href="/assets/index.html-BeTpQM6T.js" as="script"><link rel="prefetch" href="/assets/index.html-DyceFdUu.js" as="script"><link rel="prefetch" href="/assets/index.html-BfugTFQ1.js" as="script"><link rel="prefetch" href="/assets/index.html-B3GLfHwo.js" as="script"><link rel="prefetch" href="/assets/index.html-CFjReuvE.js" as="script"><link rel="prefetch" href="/assets/index.html-C2pXUbU_.js" as="script"><link rel="prefetch" href="/assets/index.html-Vu2SrKs8.js" as="script"><link rel="prefetch" href="/assets/index.html-C7414Yqk.js" as="script"><link rel="prefetch" href="/assets/index.html-B17FM3B5.js" as="script"><link rel="prefetch" href="/assets/index.html-DZikaaE6.js" as="script"><link rel="prefetch" href="/assets/index.html-Ck93442U.js" as="script"><link rel="prefetch" href="/assets/index.html-Dhi8-zTv.js" as="script"><link rel="prefetch" href="/assets/index.html-BqOvT8Yb.js" as="script"><link rel="prefetch" href="/assets/index.html-CRV5frh4.js" as="script"><link rel="prefetch" href="/assets/index.html-CCc_W690.js" as="script"><link rel="prefetch" href="/assets/index.html-ATGhuE78.js" as="script"><link rel="prefetch" href="/assets/index.html-uNDyJVnF.js" as="script"><link rel="prefetch" href="/assets/index.html-C9-gmDCc.js" as="script"><link rel="prefetch" href="/assets/index.html-CM6YrSQ9.js" as="script"><link rel="prefetch" href="/assets/index.html-BM03T7l1.js" as="script"><link rel="prefetch" href="/assets/index.html-P_hEKJqN.js" as="script"><link rel="prefetch" href="/assets/index.html-BRIg5QRp.js" as="script"><link rel="prefetch" href="/assets/index.html-DtA7Dywx.js" as="script"><link rel="prefetch" href="/assets/index.html-BwV3Ra7p.js" as="script"><link rel="prefetch" href="/assets/index.html-B6MMVECo.js" as="script"><link rel="prefetch" href="/assets/index.html-BINJgACD.js" as="script"><link rel="prefetch" href="/assets/index.html-DIJio2Tv.js" as="script"><link rel="prefetch" href="/assets/index.html-BG3OyZjZ.js" as="script"><link rel="prefetch" href="/assets/index.html-BeJARBnX.js" as="script"><link rel="prefetch" href="/assets/index.html-CpAOiFj-.js" as="script"><link rel="prefetch" href="/assets/index.html-CdkLy-Wd.js" as="script"><link rel="prefetch" href="/assets/index.html-DbEzpPY3.js" as="script"><link rel="prefetch" href="/assets/index.html-CtZqHGm8.js" as="script"><link rel="prefetch" href="/assets/index.html-_FykXjR-.js" as="script"><link rel="prefetch" href="/assets/index.html-CunANy4_.js" as="script"><link rel="prefetch" href="/assets/index.html-CJxO_iTs.js" as="script"><link rel="prefetch" href="/assets/index.html-CfyCIJCQ.js" as="script"><link rel="prefetch" href="/assets/index.html-DZc24mnD.js" as="script"><link rel="prefetch" href="/assets/index.html-CbV07x6k.js" as="script"><link rel="prefetch" href="/assets/index.html-BC32Txe5.js" as="script"><link rel="prefetch" href="/assets/index.html-TyCyi9YJ.js" as="script"><link rel="prefetch" href="/assets/index.html-BShciRPQ.js" as="script"><link rel="prefetch" href="/assets/index.html-B49je_-O.js" as="script"><link rel="prefetch" href="/assets/index.html-BhZoioJ0.js" as="script"><link rel="prefetch" href="/assets/index.html-D0wfNZI8.js" as="script"><link rel="prefetch" href="/assets/index.html-BXf8-auz.js" as="script"><link rel="prefetch" href="/assets/index.html-DzgKHzpY.js" as="script"><link rel="prefetch" href="/assets/index.html-DAheTps6.js" as="script"><link rel="prefetch" href="/assets/index.html-w58h_L_e.js" as="script"><link rel="prefetch" href="/assets/index.html-DFvLadSl.js" as="script"><link rel="prefetch" href="/assets/index.html-C5uopF_6.js" as="script"><link rel="prefetch" href="/assets/index.html-D36y7ksJ.js" as="script"><link rel="prefetch" href="/assets/index.html-mmvqN6MV.js" as="script"><link rel="prefetch" href="/assets/index.html-0PJw5lg_.js" as="script"><link rel="prefetch" href="/assets/index.html-C6nysRRw.js" as="script"><link rel="prefetch" href="/assets/index.html-dFdP5VTf.js" as="script"><link rel="prefetch" href="/assets/index.html-C6tggCTe.js" as="script"><link rel="prefetch" href="/assets/index.html-CtONS2X_.js" as="script"><link rel="prefetch" href="/assets/index.html-DwYOWgkX.js" as="script"><link rel="prefetch" href="/assets/index.html-DbpKhQU1.js" as="script"><link rel="prefetch" href="/assets/index.html-BTuA_CGc.js" as="script"><link rel="prefetch" href="/assets/index.html-BGB3U8az.js" as="script"><link rel="prefetch" href="/assets/index.html-Dqgj4Q5V.js" as="script"><link rel="prefetch" href="/assets/index.html-ChadnpI8.js" as="script"><link rel="prefetch" href="/assets/index.html-BJaDP4So.js" as="script"><link rel="prefetch" href="/assets/index.html-DfK3YENl.js" as="script"><link rel="prefetch" href="/assets/index.html-i2rYoSb1.js" as="script"><link rel="prefetch" href="/assets/index.html-CD9pHoJp.js" as="script"><link rel="prefetch" href="/assets/index.html-BFkiqLM_.js" as="script"><link rel="prefetch" href="/assets/index.html-aLMig45_.js" as="script"><link rel="prefetch" href="/assets/index.html-D_YIYpVy.js" as="script"><link rel="prefetch" href="/assets/index.html-BHQ9edzj.js" as="script"><link rel="prefetch" href="/assets/index.html-9xs6g_3X.js" as="script"><link rel="prefetch" href="/assets/index.html-Cw-o30xh.js" as="script"><link rel="prefetch" href="/assets/index.html-7XeFzBFW.js" as="script"><link rel="prefetch" href="/assets/index.html-DASg8Kjb.js" as="script"><link rel="prefetch" href="/assets/index.html-BCITRyXv.js" as="script"><link rel="prefetch" href="/assets/index.html-BPW_tPSP.js" as="script"><link rel="prefetch" href="/assets/index.html-Dm4EO-5Q.js" as="script"><link rel="prefetch" href="/assets/index.html-B1RqoUPS.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-GXRgw7eJ.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">跳至主要內容</a><!--]--><div class="theme-container external-link-icon has-toc"><!--[--><header id="navbar" class="vp-navbar auto-hide"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><!--[--><a class="route-link vp-brand" href="/"><img class="vp-nav-logo" src="/logo1.png" alt><!----><span class="vp-site-name hide-in-pad">ErenJaeger</span></a><!--]--><!----></div><div class="vp-navbar-center"><!----><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/" aria-label="主页"><!--[--><span class="font-icon icon iconfont icon-zhuye" style=""></span><!--]-->主页<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/demo/" aria-label="导航"><!--[--><span class="font-icon icon iconfont icon-daohang" style=""></span><!--]-->导航<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="总览"><!--[--><span class="font-icon icon iconfont icon-zonglan01" style=""></span>总览<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/article/" aria-label="全部"><!--[--><span class="font-icon icon iconfont icon-quanbu" style=""></span><!--]-->全部<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/category/" aria-label="分类"><!--[--><span class="font-icon icon iconfont icon-fenlei" style=""></span><!--]-->分类<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/tag/" aria-label="标签"><!--[--><span class="font-icon icon iconfont icon-biaoqian" style=""></span><!--]-->标签<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/timeline/" aria-label="时间轴"><!--[--><span class="font-icon icon iconfont icon-timeAxis" style=""></span><!--]-->时间轴<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><a class="route-link route-link-active auto-link" href="/notes/" aria-label="笔记"><!--[--><span class="font-icon icon iconfont icon-bijijilu" style=""></span><!--]-->笔记<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/insights/" aria-label="感悟"><!--[--><span class="font-icon icon iconfont icon-ganwuxianxing" style=""></span><!--]-->感悟<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/intro.html" aria-label="关于"><!--[--><span class="font-icon icon iconfont icon-guanyu" style=""></span><!--]-->关于<!----></a></div></nav><!--]--><!----></div><div class="vp-navbar-end"><!----><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/ErenJaegerKing" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-outlook-button" tabindex="-1" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon" name="outlook"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="vp-outlook-dropdown"><!----></div></button></div><!----><!--]--><!----><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!----><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/notes/" aria-label="笔记"><!--[--><span class="font-icon icon iconfont icon-bijijilu" style=""></span><!--]-->笔记<!----></a></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon iconfont icon-java" style=""></span><span class="vp-sidebar-title">Java</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon iconfont icon-leetcode" style=""></span><span class="vp-sidebar-title">算法</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon iconfont icon-sheji" style=""></span><span class="vp-sidebar-title">设计模式</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon iconfont icon-qianduan" style=""></span><span class="vp-sidebar-title">前端</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon iconfont icon-shujuku" style=""></span><span class="vp-sidebar-title">数据库</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon iconfont icon-weifuwu" style=""></span><span class="vp-sidebar-title">微服务</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><span class="font-icon icon iconfont icon-yunwei" style=""></span><span class="vp-sidebar-title">运维</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">部署、配置</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">服务器管理</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">监控、日志</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">容器化、编排</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/notes/devops/%E5%AE%B9%E5%99%A8%E5%8C%96%E3%80%81%E7%BC%96%E6%8E%92/docker_note.html" aria-label="Docker学校课堂笔记"><!---->Docker学校课堂笔记<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/notes/devops/%E5%AE%B9%E5%99%A8%E5%8C%96%E3%80%81%E7%BC%96%E6%8E%92/docker_compose_note.html" aria-label="Docker实现SpringBoot项目集群"><!---->Docker实现SpringBoot项目集群<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/notes/devops/%E5%AE%B9%E5%99%A8%E5%8C%96%E3%80%81%E7%BC%96%E6%8E%92/k8s_note.html" aria-label="k8s的学校课堂学习笔记"><!---->k8s的学校课堂学习笔记<!----></a></li></ul></section></li></ul></section></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->Docker学校课堂笔记</h1><div class="page-info"><span class="page-author-info" aria-label="作者🖊" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://ErenJaegerKing.github.io" target="_blank" rel="noopener noreferrer">ErenJaegerKing</a></span><span property="author" content="ErenJaegerKing"></span></span><!----><span class="page-date-info" aria-label="写作日期📅" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2024-09-24T00:00:00.000Z"></span><!----><span class="page-reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 26 分钟</span><meta property="timeRequired" content="PT26M"></span><span class="page-category-info" aria-label="分类🌈" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon" name="category"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item color0 clickable" role="navigation">运维</span><!--]--><meta property="articleSection" content="运维"></span><span class="page-tag-info" aria-label="标签🏷" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon" name="tag"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item color8 clickable" role="navigation">Docker</span><!--]--><meta property="keywords" content="Docker"></span></div><hr></div><div class="vp-toc-placeholder"><aside id="toc"><!----><div class="vp-toc-header">此页内容<button type="button" class="print-button" title="打印"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon" name="print"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_1-简介">1.简介</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2-安装docker">2.安装Docker</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_3-docker架构">3.Docker架构</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_4-配置docker镜像加速器">4.配置docker镜像加速器</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_5-docker命令">5.Docker命令</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#docker服务相关命令">docker服务相关命令</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#docker镜像相关命令">docker镜像相关命令</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#docker容器相关命令">Docker容器相关命令</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_6-docker-容器数据卷">6.Docker 容器数据卷</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#数据卷概念">数据卷概念</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#配置数据卷">配置数据卷</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#数据卷容器">数据卷容器</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_7-docker应用部署">7.Docker应用部署</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#mysql部署">Mysql部署</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#tomcat部署">Tomcat部署</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#nginx部署">Nginx部署</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_8-dokcer镜像原理-dockerfile">8.Dokcer镜像原理 （DockerFile）</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#概念">概念</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#镜像制作">镜像制作</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_9-docker服务编排工具-docker-compose">9.Docker服务编排工具  Docker Compose</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#服务编排概念">服务编排概念</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#docker-compose安装和使用-参考网站">Docker  compose安装和使用（参考网站）</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#docker私有仓库搭建">docker私有仓库搭建</a></li><!----><!--]--></ul></li><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!----></aside></div><!----><div class="theme-hope-content"><div class="hint-container info"><p class="hint-container-title">相关信息</p><p>这是我学校课程的课堂笔记，很详细</p></div><h2 id="_1-简介" tabindex="-1"><a class="header-anchor" href="#_1-简介"><span>1.简介</span></a></h2><ul><li>Docker是一个开源的应用容器引擎</li><li>诞生于2013年初，基于Go语言实现，dotCloud公司出品（后改名为Docker inc）</li><li>Docker可以让开发者打包他们的应用以及依赖包到一个轻量级、可移植的容器中，然后发布到任何流行的Linux机器上；</li><li>容器是完全使用沙箱机制，相互隔离</li><li>容器性能开销极低</li><li>Docker从17.03版本之后 分为CE（Community Edition：社区版）和EE（Enterprise Edition企业版）</li></ul><p>小结：docker是一种容器技术，解决软件跨环境迁移的问题；</p><h2 id="_2-安装docker" tabindex="-1"><a class="header-anchor" href="#_2-安装docker"><span>2.安装Docker</span></a></h2><p>Docker可以 运行在MAC、Windows、CentOS、UBUNTU等操作系统上，我们基于Centos安装Docker。官网：https://www.docker.com 安装Docker步骤命令：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">1.yum包更新到最新</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    yum</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  update</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -y</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">2.安装需要的软件包，yum-util提供yum-config-manager功能，另外两个是devicemapper驱动依赖的；</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">   yum</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  install</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -y</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  yum-utils</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  device-mapper-persistent-data</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  1vm2</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">3.设置yum源</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">wget</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -O</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/yum.repos.d/docker-ce.repo</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">如下方式以前的时候也能</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 用</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 但是最近不行了</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">yum-config-manager</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --add-repo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  https://download.docker.com/linux/centos/docker-ce.repo</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">4.安装docker，出现输入的界面都按y</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">yum</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  install</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -y</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   docker-ce</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">5.查看docker版本</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  验证是否验证成功</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -v</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">6.设置docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 开机自启动</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   enable</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  docker</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-docker架构" tabindex="-1"><a class="header-anchor" href="#_3-docker架构"><span>3.Docker架构</span></a></h2><figure><img src="https://drawingbed-686.pages.dev/myblog/202409241259032.png" alt="Docker架构" tabindex="0" loading="lazy"><figcaption>Docker架构</figcaption></figure><ul><li>镜像（Image）：Docker镜像（Image），就相当于是一个root文件系统。比如官方镜像ubuntu：16.04就包含了完整的一套Ubuntu16.04最小系统的root文件系统。</li><li>容器（Container）：镜像（Image）和容器（Container）的关系，就像是面向对象程序设计中的类和对象的关系，镜像是静态的定义，容器是镜像运行时的实体。容器可以被创建、启动停止、删除、暂停等；</li><li>仓库（Repository）：仓库可看成一个代码控制中心，用来保存镜像；</li></ul><p>记住一点：镜像 跟容器 之前关系紧密，先有镜像 然后 就可以 生产出很多个该镜像对应的容器出来；</p><h2 id="_4-配置docker镜像加速器" tabindex="-1"><a class="header-anchor" href="#_4-配置docker镜像加速器"><span>4.配置docker镜像加速器</span></a></h2><p>默认情况下，将来从docker hub（https://hub.docker.com/）上下载docker镜像太慢。一般都会配置镜像加速器，国内镜像加速器有：</p><ul><li>USTC：中科大镜像加速器（https://docker.mirrors.ustc.edu.cn）</li><li>阿里云</li><li>网易云</li><li>腾讯云</li></ul><p>容器镜像服务：选择自己对应的系统按照阿里给出的提示指令进行复制黏贴操作这些指令</p><p>最新镜像加速器：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  &quot;registry-mirrors&quot;</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">[</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">&quot;https://hub.atomgit.com&quot;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>更换加速器 通用方法 但是其中 镜像地址 要根据情况 随时更换：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">step1：</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">在etc目录下创建一个叫做docker的文件夹（如若没有就创建一下）</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">step2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ：</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">在/etc/docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 目录下创建一个文件</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  文件里面书写</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 我们的镜像仓库配置内容；</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">vim</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  daemon.json</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">在该配置文件当中书写：</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    &quot;registry-mirrors&quot;</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">[</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">&quot;https://docker.anyhub.us.kg&quot;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">step3:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">重新load一下配置文件</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     daemon-reload</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">step4:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">重启我们的docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 服务</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   restart</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  docker</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">测试下拉镜像：</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  pull</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   nginx</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>当我们进行下载镜像的时候 如果镜像名称后面 没有书写 版本号的话那么默认下载的就是最新的 当前镜像版本 也就是latest（最新的） 如果需要下载指定版本的 某镜像的话可以去docker hub上搜索对应的镜像所有版本 查找到自己需要的镜像的版本号： docker pull 镜像名称:镜像版本号<br> 这样就可以下载到我们需要的指定版本的 镜像了；</p><h2 id="_5-docker命令" tabindex="-1"><a class="header-anchor" href="#_5-docker命令"><span>5.Docker命令</span></a></h2><p>忘记命令的话可以去 https://www.runoob.com/docker/docker-command-manual.html 查找相关命令</p><h3 id="docker服务相关命令" tabindex="-1"><a class="header-anchor" href="#docker服务相关命令"><span>docker服务相关命令</span></a></h3><ul><li>启动docker服务 systemctl start docker</li><li>停止docker服务 systemctl stop docker</li><li>重启docker服务 systemctl restart docker</li><li>查看docker服务状态systemctl status docker</li><li>开机启动docker服务 systemctl enable docker</li></ul><h3 id="docker镜像相关命令" tabindex="-1"><a class="header-anchor" href="#docker镜像相关命令"><span>docker镜像相关命令</span></a></h3><ul><li>查看镜像 (查看本地已经存在的镜像) docker images</li><li>查看所有镜像的 ID docker images -q</li><li>搜索镜像：从网络中查找需要的镜像 docker search 镜像名称（该命令并不能帮助我们查找所有某镜像的版本 帮我们查找的内容是含有搜索内容的名称的所有镜像）</li><li>拉取镜像 从Docker仓库下载镜像到本地，镜像名称格式为 名称：版本号，如果版本号不指定则是最新的版本。如果不知道镜像版本，可以去docker hub 搜索对应镜像查看版本； docker pull 镜像名称</li><li>删除镜像:删除本地镜像 docker rmi 镜像id 也可以 docker rmi 镜像名称:版本号</li><li>删除所有本地镜像 ： docker rmi ·docker images -q· 删除所有本地镜像（符号是tab按键上面的撇）</li></ul><p>其中查看镜像 删除镜像都是对本地仓库进行操作 搜索镜像 拉取镜像 是对远程仓库进行的操作； 在进行下拉镜像过程中可以指定版本号进行下拉镜像，docker pull 镜像名称：版本号 如果不清楚镜像 存在哪些版本 我们可以登录 hub.docker.com(不太好访问) 网站上进行搜索查询；</p><h3 id="docker容器相关命令" tabindex="-1"><a class="header-anchor" href="#docker容器相关命令"><span>Docker容器相关命令</span></a></h3><ul><li>查看正在运行的容器 docker ps</li><li>查看所有容器（包括没有运行的容器） docker ps -a</li><li>创建并启动容器 docker run 参数</li></ul><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" data-title="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>      参数说明</span></span>
<span class="line"><span>      -i  ：保持容器运行，通常与-t同时使用，加入it这两个参数后，容器创建后自动进入容器中，退出容器后，容器自动关闭；</span></span>
<span class="line"><span>      -t  ：为容器重新分配一个伪输入终端，通常与-i同时使用</span></span>
<span class="line"><span>      -d ：以守护（后台）模式运行容器。创建一个容器在后台运行，需要使用docker exec进入容器。退出后  容器不会关闭；</span></span>
<span class="line"><span>      -it ：创建的容器一般称为交互式容器，-id创建的容器一般称为守护式容器</span></span>
<span class="line"><span>     --name：为创建的容器命名</span></span>
<span class="line"><span></span></span>
<span class="line"><span>启动容器：docker  start  容器名称或者容器ID</span></span>
<span class="line"><span>关闭容器：docker   stop   容器名称 或者容器ID</span></span>
<span class="line"><span>进入某容器：docker  exec   容器名称  （docker  exec  -it   my  /bin/bash）</span></span>
<span class="line"><span>删除某容器（注意 删除容器的时候 容器必须是关闭状态才可以进行删除）：docker  rm  容器名称</span></span>
<span class="line"><span>查看容器信息：  docker   inspect  容器名称</span></span>
<span class="line"><span>查看所有容器的id：docker  ps  -aq   </span></span>
<span class="line"><span>删除所有容器   docker  rm  ·docker  ps  -aq·</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>实操：</span></span>
<span class="line"><span>创建一个名字叫做c1  包含xx镜像内容到当前容器的容器  </span></span>
<span class="line"><span>docker   run  -it    --name  c1    镜像名称:镜像版本    /bin/bash  </span></span>
<span class="line"><span>执行后发现直接进入到了新创建的这个叫做c1的容器中  这个时候 如果想要退出当前的 容器 执行  exit即可  就可以退回到 linux容器；</span></span>
<span class="line"><span>docker  run  -id  --name  c2  mysql:latest </span></span>
<span class="line"><span>这个指令执行后是创建启动一个叫做c2的容器 这个容器后台运行并且  默认不进入该容器中；</span></span>
<span class="line"><span>此时想要进入该容器 执行  docker  exec  -it  c2   /bin/bash</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_6-docker-容器数据卷" tabindex="-1"><a class="header-anchor" href="#_6-docker-容器数据卷"><span>6.Docker 容器数据卷</span></a></h2><h3 id="数据卷概念" tabindex="-1"><a class="header-anchor" href="#数据卷概念"><span>数据卷概念</span></a></h3><p>思考： Docker容器删除后再容器中产生的数据还在么？ Docker容器和外部机器可以直接交换文件吗？</p><p>数据卷概念：</p><ul><li>数据卷是宿主机中的一个目录或者文件；</li><li>当容器目录和数据卷绑定后，双方的修改会立即同步；</li><li>一个数据卷可以被多个容器同时挂载</li></ul><p>数据卷作用：</p><ul><li>容器数据持久化（记住一点：当我们删除一个容器的时候 之前同步到 数据卷中的该容器上传的文件数据内容不会被删除）</li><li>外部机器和容器间接通信</li><li>容器之间数据交换</li></ul><h3 id="配置数据卷" tabindex="-1"><a class="header-anchor" href="#配置数据卷"><span>配置数据卷</span></a></h3><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">创建启动容器时，使用-v参数设置数据卷：</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   run</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    ...</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -v</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  宿主机目录（文件）：容器内目录（文件）</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  ...</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">注意事项</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">1.目录必须是绝对路径；</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">2.如果目录不存在，会自动创建（指的是宿主机当中如若没有</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 该目录会去进行创建）；</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">3.一个数据卷可以被多个容器进行挂载</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   ；一个容器可以挂载多个数据卷；</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">4.当删除某容器后</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  在外的数据卷目录中的数据不会被删除；</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">一般情况下我们建议在创建容器的时候就去挂载数据卷，标准写法是：</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   run</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -it</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   --name</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  n2</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      -v</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   /nginxvol:/etc</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     nginx:latest</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   /bin/bash</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>也可以 一个 容器绑定多个数据卷（一般情况下不会这么用）</p><p>多容器之间互相通信：当两个或者两个以上容器共同挂载同一份数据卷的时候，彼此容器之间可以实现文件内容互相传输；</p><h3 id="数据卷容器" tabindex="-1"><a class="header-anchor" href="#数据卷容器"><span>数据卷容器</span></a></h3><p>为什么会出现数据卷容器一说？是因为在docker中一旦容器创建好了 之后不太容易 再去为已经创建好的容器去进行增加数据卷挂载；</p><p>多容器进行数据交换： 1.多个容器挂载同一个数据卷； 2.使用数据卷容器</p><figure><img src="https://drawingbed-686.pages.dev/myblog/202409241313200.png" alt="数据卷容器" tabindex="0" loading="lazy"><figcaption>数据卷容器</figcaption></figure><p>其中这个c3容器就是数据卷容器，相当于 我们先创建一个c3容器，让c3容器挂载到一个数据卷上； 然后创建c1 c2两个容器的时候分别挂载到c3 容器上，这样一来 相当于三个容器都挂载到相同数据卷上； 注意：1.即便c3容器挂掉 也不会影响c1 以及c2 使用数据卷 因为挂载已经完成，内部挂载关系已经成立了； 2.思考：数据卷容器存在的意义是什么？貌似单独创建了一个容器什么也不做，只是一门心思去挂载一个数据卷。 我们之前多个容器自己单独挂载到相同目录实现容器之间互相共用一个数据卷 也能实现现在的效果。那么数据卷容器的存在意义是什么？ 假如有这样一种情形有100个容器都挂载到宿主机相同目录数据卷上 了，突然有一天 宿主机想要更换一下当前目录，那么按照以前的那种处理方式的话我们需要 每个容器都要进行更改，意味着要操作100次更改。但是如果是通过 数据卷容器这种方式的话我们只需要更改 数据卷容器即可，因为通过数据卷容器这种方式 进行的挂载 其他容器是挂载到当前容器的，当前容器发生更改 其他的也会进行同步更改 为我们节约时间提升效率；</p><p>实现数据卷容器案例：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">创建</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  一个数据卷容器叫做c3</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  ，创建两个其他容器</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  c1、c2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  让c1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  c2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  挂载到c3上</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  然后测试实验数据卷容器：</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">step1：创建启动c3数据卷容器</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> run</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -it</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  --name</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> c3</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -v</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /vdata</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> centos:7</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  /bin/bash</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">step2：创建c1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  c2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  容器</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  分别挂载到c3上：</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   run</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -it</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   --name</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  c1</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  --volumes-from</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  c3</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  centos:7</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  /bin/bash</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   run</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -it</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  --name</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   c2</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --volumes-from</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  c3</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   centos:7</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  /bin/bash</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">可以通过docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  inspect</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  c1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">   </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">      docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  inspect</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  c3</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  inspect</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  c2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  命令去查看具体每个容器情况</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  在展示内容信息中观察</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> mounts部分内容</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 当中带有对当前容器数据卷内容描述；</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">可观察到</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> c2容器目录中多出vdata目录；</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">c1容器同理；</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">并且</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  c2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> c1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 以及c3容器他们mounts</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 部分</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  Source内容也是相同的:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">二者是相同的（其实三者都是相同的）；</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">即便数据卷容器</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 关闭掉了</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  不会影响其他挂载到数据卷容器之间数据交换；</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">即便数据卷容器关闭掉了</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 依旧可以新建容器的时候</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 挂载到当前数据卷容器当中；</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_7-docker应用部署" tabindex="-1"><a class="header-anchor" href="#_7-docker应用部署"><span>7.Docker应用部署</span></a></h2><h3 id="mysql部署" tabindex="-1"><a class="header-anchor" href="#mysql部署"><span>Mysql部署</span></a></h3><p>需求：在Docker容器中部署Mysql 并通过外部mysql客户端操作Mysql Server 实现步骤： 1.搜索mysql镜像 2.拉取mysq镜像 3.创建容器 4.操作容器中的mysql 注意：容器内的网络服务和外部机器不能直接进行通信，但外部机器和宿主机可以直接通信；宿主机和容器可以直接通信： 当容器中的网络服务需要被外部机器访问时候，可以将容器中提供服务的端口映射到宿主机的端口上。外部及起访问素质及的改端口，从而间接访问容器的服务，这种操作成为端口映射； <img src="https://drawingbed-686.pages.dev/myblog/202409241323412.png" alt="端口映射" loading="lazy"> 实操：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">1.搜索mysql镜像：</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   search</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   mysql</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">2.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 拉取mysql镜像</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   pull</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    mysql：5.6</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">3.创建容器，设置端口映射、目录映射</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    在root目录下创建mysql目录用于存储mysql数据信息</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    mkdir</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  ~/mysql</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">    cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  ~/mysql</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    而后开始创建mysql容器：</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  run</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -id</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">  \</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  3307:3306</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">  \</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     --</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> name</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  c_mysql</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     -v</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  $PWD</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/conf:/etc/mysql/conf.d</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     -v</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $PWD</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/logs:/logs</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     -v</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  $PWD</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/data:/var/lib/mysql</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     -e</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  MYSQL_ROOT_PASSWORD=root</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">  \</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   mysql:5.6</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">   参数说明：</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">1.-p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 3307:3306</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  ：将容器的3306端口映射到宿主机3307端口；</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">2.-v</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  $PWD</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/conf:/etc/mysql/conf.d:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 将主机当前目录下的conf/my.cnf挂载到容器的</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/mysql/my.cnf</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 配置目录</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">3.-v</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $PWD</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/logs:/logs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ：将主机当前目录下的logs目录挂载到容器的</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /logs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 日志目录</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">4.-v</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  $PWD</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/data:/var/lib/mysql</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  ：将主机当前目录西安的data目录</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 挂载到容器的</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  /var/lib/mysql</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 数据目录</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">5.-e</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  MYSQL_ROOT_PASSWORD=root</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  ：初始化root用户的密码</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">进入到当前的容器中：</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  exec</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   -it</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   c_mysql</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    /bin/bash</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">在容器中启动进入</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  mysql服务以及客户端：</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   mysql</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -uroot</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -proot</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  回车后进入到mysql客户端；</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="tomcat部署" tabindex="-1"><a class="header-anchor" href="#tomcat部署"><span>Tomcat部署</span></a></h3><p>Tomcat简介：tomcat是一个应用服务器 是一个专门用来 运行web项目使用的服务器 该软件 专门用于启动 后 处理 请求与响应使用的；</p><blockquote><p>tomcat软件本身的端口号 是8080；</p></blockquote><p>需求：在docker容器中部署Tomcat，并通过外部机器访问Tomcat部署的项目。 实现步骤： 1.搜索tomcat镜像 2.拉取tomca镜像 3.创建容器 4.部署项目 5.测试访问</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">1.搜索tomcat镜像</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  search</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  tomcat</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">2.拉取tomcat镜像</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  pull</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  tomcat</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">3.创建容器</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ，设置端口映射、目录映射</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mkdir</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   ~/tomcat</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  ~/tomcat</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  run</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    -id</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  --name</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  c_tomcat</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-p  </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">8080:8080</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-v  </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$PWD</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">:/usr/local/tomcat/webapps</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">tomcat：7</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">参数说明：</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  8080:8080：将容器的8080端口</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 映射到主机的8080端口</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-v</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  $PWD</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">:/usr/local/tomcat/webapps</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  ：将主机中当前目录挂载到容器的webapps</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">此时在我们linux服务器的</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  ~/tomcat</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 目录下</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 创建一个文件夹</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 在该文件夹中创建一个html页面文件</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   并编辑一些内容进去保存</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 而后在windows系统中直接访问该页面：访问成功！</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="nginx部署" tabindex="-1"><a class="header-anchor" href="#nginx部署"><span>Nginx部署</span></a></h3><p>需求：在Docker容器中部署Nginx，并通过外部机器访问Nginx</p><p>实现步骤： 1.搜索 2.拉取 3.创建容器 4.部署项目 5.测试访问</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">1.搜索</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nginx镜像</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  search</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   nginx</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">2.拉取nginx镜像</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  pull</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  nginx</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">3.创建容器，设置端口映射、目录映射</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">#在/root  目录下 创建 nginx 目录用于存储nginx数据信息</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mkdir</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  ~/nginx</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  ~/nginx</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">4.提前创建好nginx.conf</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 目录</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mkdir</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   conf</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  conf</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">vim</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  nginx.conf</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>将如下内容添加到配置文件中：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">#user  nobody   nginx启动的所属用户,默认为nobody;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># nginx的最大worker的最大进程数   建议设置为当前服务器的CPU核数</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">worker_processes</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 错误日志的日志级别 , 错误日志的路径位置</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">#error_log  logs/error.log;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">#error_log  logs/error.log  notice;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">#error_log  logs/error.log  info;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">#pid的路径位置</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">#pid        logs/nginx.pid;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">events</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    #单个进程最大连接数</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    worker_connections</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  1024</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">#设定http服务器，利用它的反向代理功能提供负载均衡支持</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">http</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    #文件扩展名与文件类型映射表</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    include</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">       mime.types</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    # 默认的类型</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    default_type</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  application/octet-stream</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    # access.log日志的格式设置,默认为下面的格式</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    #log_format  main  &#39;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#39;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    #                  &#39;$status $body_bytes_sent &quot;$http_referer&quot; &#39;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    #                  &#39;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#39;;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    #access.og文件配置</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    #access_log  logs/access.log  main;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    #开启高效文件传输模式，sendfile指令指定nginx是否调用sendfile函数来输出文件，对于普通应用        设为 on，如果用来进行下载等应用磁盘IO重负载应用，可设置为off，以平衡磁盘与网络I/O处理速度，降低系统的负载。注意：如果图片显示不正常把这个改成off。</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    sendfile</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        on</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    #此选项允许或禁止使用socke的TCP_CORK的选项，此选项仅在使用sendfile的时候使用</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    #tcp_nopush     on;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    #长连接超时时间,单位是秒</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    #keepalive_timeout  0;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    keepalive_timeout</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  65</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    # 开启压缩输出,压缩数据使得数据传输更快</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    #gzip  on;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    #虚拟主机的配置</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    server</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        #监听的端口,默认为80</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        listen</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">       80</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        #域名可以有多个，用空格隔开</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        server_name</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  localhost</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        #charset koi8-r;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        #定义本虚拟主机的访问日志</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        #access_log  logs/host.access.log  main;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        #对&quot;/&quot;请求路径进行代理</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        location</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">            #root表示根目录 , html表示根目录下的html文件夹</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">            root</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   html</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">            #被访问的文件</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">            index</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  index.html</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> index.htm</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        # 错误页面   </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        error_page</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   500</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 502</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 503</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 504</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  /50x.html</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        location</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /50x.html</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> {</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">            root</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   html</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>保存 后 开始创建 nginx容器：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   run</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -id</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   --name</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  c_nginx</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">  \</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-p  </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">80:80</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">  \</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-v  </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/root/conf/nginx.conf:/etc/nginx/nginx.conf</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">  \</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-v  </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/root/conf/logs:/var/log/nginx</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">  \</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-v  </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/root/conf/html:/etc/nginx/html/</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">  \</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">nginx:latest</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">参数说明：</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  80:80：将容器的80端口</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 映射到宿主机的80端口</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-v</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  $PWD</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/conf/nginx.conf:/etc/nginx/nginx.conf</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ：将主机当前目录下的</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  /conf/nginx.conf</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 挂载到容器中的</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  etc/nginx/nginx.conf</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  上</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">然后我们进入到html目录</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  去创建一个html文件：</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  html</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">vim</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> index.html</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;h1&gt;heello&lt;/h1&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">后保存</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  再次访问</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  ：http:/192.168.141.128</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  回车即可；</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_8-dokcer镜像原理-dockerfile" tabindex="-1"><a class="header-anchor" href="#_8-dokcer镜像原理-dockerfile"><span>8.Dokcer镜像原理 （DockerFile）</span></a></h2><h3 id="概念" tabindex="-1"><a class="header-anchor" href="#概念"><span>概念</span></a></h3><p>首先明确第一个概念 虚拟机 跟容器是有本质不同的，虚拟机具备 独立的 硬件 驱动 网络 等等 相当于是一台独立的pc一样 而我们的容器 相当于是站立在巨人的肩膀上 （站立在我们宿主机的基础上 单独 开辟出来 自己这一部分 必须需要的 特有的 东西 单独拎出来）</p><p>思考：</p><ul><li>Docker镜像本质是什么？</li><li>Docker中一个centos镜像为什么只有200MB，而一个centos操作系统的iso文件要几个G？</li><li>Docker中一个tomcat镜像为什么要有500MB，而一个tomcat安装包只有70多MB？</li></ul><p>操作系统组成部分：</p><ul><li>进程调度子系统</li><li>进程通信子系统</li><li>内存管理子系统</li><li>设备管理子系统</li><li>文件管理子系统</li><li>网络通讯子系统</li><li>作业控制子系统</li></ul><p>Linux文件系统由bootfs和rootfs两部分组成</p><ul><li>bootfs：包含bootloader（引导加载程序）和kernel（内核）</li><li>rootfs：root文件系统，包含的就是典型Linux系统中的/dev，/proc , /bin,/etc等标准目录和文件</li><li>不同的linux发行版，bootfs基本一样，而rootfs不同，如ubuntu ，centos等；</li></ul><p>1.Docker镜像是由特殊的文件系统叠加而成； 2.最低端是bootfs，并使用宿主机的bootfs；（思考能否在linux操作系统上创建一个windows的docker？答案是不能的因为底层bootsfs不同，不能复用） 3.第二层是root文件系统rootfs，称为base image； 4.然后再往上可以叠加其他的镜像文件 5.统一文件系统(Union File System) 技术能够将不同的层整合成一个文件系统，为这些层提供了一个统一的视角，这样 就隐藏了多层的存在，在用户的角度看来，只存在一个文件系统。 6.一个镜像可以放在另一个镜像的上面。位于下面的镜像称为父镜像，最底部的镜像成为基础镜像。 7.当从一个镜像启动容器时，Docker会在最顶层加载一个读写文件系统作为容器。</p><figure><img src="https://drawingbed-686.pages.dev/myblog/202409241335679.png" alt="新的镜像" tabindex="0" loading="lazy"><figcaption>新的镜像</figcaption></figure><p>思考总结：</p><ol><li>Docker镜像本质是什么？ 是一个分层文件系统；</li><li>Docker中一个centos镜像为什么只有200MB，而一个centos操作系统的iso文件要几个G？ centos的iso镜像文件包含bootfs和rootfs，而docker的centos镜像复用操作系统的bootfs（较大较占体积），只有rootfs和其他镜像层；</li><li>Docker中一个tomcat镜像为什么有500MB，而一个tomcat安装包只有70多mb？ 由于docker中镜像是分层的，tomcat虽然只有70多MB，但他需要依赖于父镜像和基础镜像，所有整个对外暴露的tomcat镜像大小500多MB</li></ol><h3 id="镜像制作" tabindex="-1"><a class="header-anchor" href="#镜像制作"><span>镜像制作</span></a></h3><p>Dokcer镜像如何制作？</p><ol><li>容器转为镜像</li></ol><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  commit</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  容器</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> id</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">       镜像名称:版本号</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  save</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   -o</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  压缩文件名称</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   镜像名称:版本号</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  load</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   -i</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    压缩文件名称</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  (解压压缩文件成为镜像文件)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://drawingbed-686.pages.dev/myblog/202409241340557.png" alt="容器转为镜像" loading="lazy"> 通过上述这种方式(docker commit)封装成的镜像是存在一定问题的， 除去当初原始镜像数据卷上的文件还在 镜像本身内部原始容器中的文件都不存在了；例如 放置在tomcat容器webapps目录中的内容 不存在了 ；一般情况下我们不建议使用该种方法进行打包镜像； 总结用上述方法会导致容器中 通过数据卷方式添加进来的数据内容在进行打包镜像的时候会被遗弃；</p><ol start="2"><li>DockerFile 去打包镜像</li></ol><p>DockerFile基本概念 dockerfile就是一个文本文件，其中包含了一条条的指令； 每一条指令构建一层，基于基础镜像，最终构建出一个新的镜像； 对开发人员来说：可以为开发团队提供一个完全一致的开发环境； 对于测试人员：可以直接拿开发时所构建的镜像或者通过DockerFile文件构建一个新的镜像开始工作；</p><p>dockerhub官网网址：https://hub.docker.com</p><p>dockerFile关键字介绍： <img src="https://drawingbed-686.pages.dev/myblog/202409241339167.png" alt="dockerFile关键字" loading="lazy"></p><p><strong>dockerFile案例1：</strong> 案例1需求： 自定义centos7镜像，要求： 1.默认登录路径为/usr 2.可以使用vim 案例1实现步骤： 1.定义父镜像：FROM centos:7 2.定义作者信息：MAINTAINER sunzheng<a href="mailto:kuizhewudi@163.com" target="_blank" rel="noopener noreferrer">kuizhewudi@163.com</a> 3.执行安装vim命令：RUN yum install -y vim 4.定义默认的工作目录 ：WORKDIR /usr 5.定义容器启动执行的命令：CMD /bin/bash</p><p>注意：如何区分理解 RUN命令跟CMD命令 RUN ：是当容器已经启动并且进入以后要去进行执行的 CMD：是容器刚启动起来立即要进行的（跟容器刚刚start相关）</p><p>实操：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  ~</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mkdir</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   docker-files</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   docker-files/</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">vim</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  centos_dockerfile</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">#进入编辑内容部分 编辑内容为：</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">FROM</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> centos:7</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">MAINTAINER</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  sunzheng</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">kuizhewudi@163.co</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">m&gt;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">RUN</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     yum</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  install</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -y</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  vim</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">WORKDIR</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  /user</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">CMD</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   /bin/bash</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">#esc  输入  ：wq进行保存</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  build</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   -f</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  ./centos_dockerfile</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -t</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  sunzheng_centos:1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> .</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">#执行当看到 succesfully 提示文案的时候代表  该镜像  创建成功</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用dockerFile进行打包镜像的语句：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  build</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -f</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    dockerfile文件的相对路径/绝对路径</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   -t</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   镜像名称:版本名称</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  .</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>dockerFile 案例2：</strong> 案例2需求： 定义dockerfile，发布springboot项目； 案例2实现步骤： 1.定义父镜像： FROM java:8 2.定义作者信息：MAINTARNER sunzheng <a href="mailto:kuizhewudi@163.com" target="_blank" rel="noopener noreferrer">kuizhewudi@163.com</a> 3.将jar包添加到容器：add springboot.jar app.jar 4.定义容器启动执行的命令： CMD java -jar app.jar 5.通过dickerfile构建镜像：docker build -f dockerfile 文件路径 -t 镜像名称：版本 实操： 首先要在自己本地创建一个springboot项目： 最好是maven的 Springmvc项目，而后通过maven打包成一个jar文件 将该jar文件上传到 linux home目录账户目录下；</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  ~</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  docker-files</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">vim</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> springboot_dockerfile</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">#进入编辑界面开始编辑</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">FROM</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   java:8</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">MAINTAINER</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  sunzheng</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">kuizhewudi@163.co</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">m&gt;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ADD</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> test.jar</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  /app.jar</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">CMD</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  java</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -jar</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  /app.jar</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">EXPOSE</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  8080</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">#而后  ESA  ：wq保存</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  build</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -f</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ./springboot_dockerfile</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -t</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> app:1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> .</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">#然后创建容器</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  run</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   -it</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  --name</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  myboot</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  8080:8080</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  app:1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  /bin/bash</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_9-docker服务编排工具-docker-compose" tabindex="-1"><a class="header-anchor" href="#_9-docker服务编排工具-docker-compose"><span>9.Docker服务编排工具 Docker Compose</span></a></h2><h3 id="服务编排概念" tabindex="-1"><a class="header-anchor" href="#服务编排概念"><span>服务编排概念</span></a></h3><p>微服务架构的应用系统中一般包含若干个微服务，每个微服务一般都会部署多个实例，如果每个微服务都要手动启停 维护的工作量会很大。例如：</p><ul><li>要从Dockerfilebuildimage或者去dockerhub拉取image</li><li>要创建多个container</li><li>要管理这些container(启动停止删除)</li></ul><p>服务编排（Docker pose）：按照一定的业务规则批量的管理容器的过程</p><p>DockerCompose：Docker Compose是一个编排多容器分布式部署的工具，提供命令集管理容器化应用的完整开发周期，包括服务构建启动和停止。</p><ol><li>利用 Dockerfile定义运行环境镜像</li><li>使用 docker-compose.yml定义组成应用的各服务</li><li>运行 docker-compose up 启动应用</li></ol><h3 id="docker-compose安装和使用-参考网站" tabindex="-1"><a class="header-anchor" href="#docker-compose安装和使用-参考网站"><span>Docker compose安装和使用（参考网站）</span></a></h3><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">#下载docker-compose文件</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> curl</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -SL</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> https://github.com/docker/compose/releases/download/v2.27.0/docker-compose-linux-x86_64</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -o</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /usr/local/bin/docker-compose</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> #将文件复制到/usr/local/bin环境变量下面</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mv</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> docker-compose</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /usr/local/bin</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">#给他一个执行权限</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">chmod</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> +x</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /usr/local/bin/docker-compose</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">#查看是否安装成功</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker-compose</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -v</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">查看到版本号即表示安装成功</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果以上方式下载过于缓慢 可以通过自行下载上传 然后安装该工具方式进行实现：</p><p>https://blog.csdn.net/m0_63459865/article/details/136693757</p><p>下载后手动ftp上传 进行 移动文件目录 等 同上述后者操作；</p><p>如果想要卸载的话 直接执行 rm /usr/local/bin/docker-compose即可</p><p>全称叫做yaml格式类型配置文件 。是一种配置文件的格式而已，就像XML类型配置文件的特点是标签之间包裹标签去实现层级关系一样，yaml配置文件也存有一定的配置规则： 1.同层级关系内容在进行配置的时候要求左边对齐； 2.高级的比下一级的要偏左 或者说下一级的要比上一级进行缩进书写（注意整个yml配置文件在进行实现缩进的时候不可以使用tab进行缩进，只能使用空格进行缩进关系） 3.一般我们要对一些属性进行赋值的时候 是属性 : 值（强调的是 冒号后面跟随值的时候冒号后面一定要加空格 至少一个空格） 4.我们在使用yml格式表达一些配置内容的时候 通过 - 表示数组中很多项的值,需要注意的是-符号后方跟随值得时候也要添加空格</p><p>当docker-compose安装成功之后我们来对其进行学习了解： Docker Compose是一个编排多容器分布式部署的工具，提供命令集管理容器化应用的完整开发周期，包括服务构建 启动和停止。</p><p>使用步骤: 1.利用 Dockerfile定义运行环境镜像 2.使用 docker-compose.yml定义组成应用的各服务 3.运行 docker-compose up 启动应用</p><p>案例借助docker-compose实现nginx反向代理springboot app应用的案例（至少需要两个容器实现：）： 首先我们创建一个文件夹：dockercompose（这个随意） 进入当前文件夹后我们创建一个名字叫做 docker-compose.yml的文件（该文件名固定 不可以乱写） docker-compose.yml中的内容(注意书写格式内容要遵循之前Java中yml格式要求 例如空格要求 以及缩进等): 该案例实现的是 nginx作为反向代理服务器（单独一个容器） 去访问我们的springboot项目（另外独立的一个容器）：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">version:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;3&#39;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">services:</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  nginx:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">     image:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nginx</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">     ports:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">       -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;80:80&quot;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">     links:</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">       -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> app</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">     volumes:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">      -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ./nginx/conf.d:/etc/nginx/conf.d</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  app:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">   image:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> myboot</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">   expose:</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">     -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;8080&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">解释说明参数：</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">version：指的是</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  当前docker-compose.yml配置文件的版本级别</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 不是docker-compose</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 软件的版本级别</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">services：指的是我们要创建的容器们（也就是服务们）</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">里面要开始去嵌套书写</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 一个一个的容器了</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  image属性：当前容器要去进行创建使用使用的镜像（建议大家</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 镜像名称:版本号）</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  ports属性：进行映射端口使用的</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">     -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;80:80&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (注意在这里 </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">左边的80指的是指向给宿主机的端口号</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  :右边的80指的是绑定到容器的端口</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  links属性：Nginx服务反向代理</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 的应用是哪个</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">   </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  volumes：数据卷</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后做好其他准备工作： 在宿主机上创建对应数据卷目录./nginx/conf.d 在该目录中创建一个文件名为 default.conf的文件，在该文件中输入如下内容：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">server</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">{</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">      listen</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  80</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">      access_log</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  off</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">      location</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> {</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">      proxy_pass</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  http://app:8000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">   } </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>保存后 执行docker compose的指令：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker-compose</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  up</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -d</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>然后访问：http://192.168.178.128/test 即可访问成功证明nginx 反向代理boot项目成功；</p><h3 id="docker私有仓库搭建" tabindex="-1"><a class="header-anchor" href="#docker私有仓库搭建"><span>docker私有仓库搭建</span></a></h3><p>像maven一样，一般情况下我们去引入本地不存在的资源的时候是通过远程服务资源中下载到本地仓库，下次如果还需要引入相同资源我们直接使用本地仓库内容即可；</p><p>docker也可以进行搭建私有仓库在公司内部进行使用；</p><p>Docker官方的Dockerhub(https://hub.docker.com)是一个用于管理公共镜像的仓库，我们可以从上面拉取镜像到本地，也可以把我们自己的镜像推送上去。但是，有时候我们的服务器无法访问互联网，或者你不希望将自己的镜像放到公网当中，那么我们就需要搭建自己的私有仓库来存储和管理自己的镜像。</p><p>私有仓库的搭建： (ps:注意一般情况下我们私有服务仓库要跟我们的服务器分开 安全第一)</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">1.私有仓库镜像拉取</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  pull</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  registery</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">2.创建启动私有仓库容器</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  run</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -id</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  --name</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  registry</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 5000:5000</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> registry</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">3.打开浏览器输入地址</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> http://私有仓库服务器ip:5000/v2/_catalog</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">如果看到</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">{</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&quot;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">repositories</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">&quot;:[]}表示私有仓库搭建成功</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">或者直接直接执行curl http://localhost:5000/v2/_catalog  展示如上内容证明私有仓库容器搭建成功</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">4.修改daemon.json（相当于添加信任  让当前私有仓库信任访问的服务ip）</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">vim  /etc/docker/daemon.json</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">在该文件中 添加一个key 保存退出 。此步骤用于让docker 信任私有仓库地址；</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">注意将私有仓库服务器ip修改为自己私有仓库服务器真实ip</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">{&quot;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">insecure-registies</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">&quot;:[&quot;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">私有仓库服务器ip:5000</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">&quot;]}</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">5.重启docker服务</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">systemctl  restart docker</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker  start  registry（启动私服容器）</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>==========》上传镜像： 1.先标记<br> docker tag 镜像名称：版本号 私有仓库服务器ip:5000/ 私服中镜像新名称：版本号 2.再上传push docker push 私有仓库服务器ip:5000/私服镜像名称：版本号 ========》下拉镜像： docker pull 私有仓局服务器ip:5000/私服务镜像名称：版本号</p><p>======================================================================= Docker 支持的可视化客户端工具： 有很多很多，例如国内的1Panel 以及 Docker UI 等 在这里以1Panel+Centos7环境介绍使用： 概念:1Panel :是一个开源的服务器运维管理面板； 首先去官网访问进行下载安装： 官网：https://1panel.cn/</p><p>补充：ip addr 可以查看 当前centos地址 让当前 虚拟机能够联网 设置:﻿https://blog.csdn.net/weixin_45213317/article/details/132171346</p></div><!----><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">上次编辑于: </span><!----></div><div class="contributors"><span class="vp-meta-label">贡献者: </span><!--[--><!--[--><span class="vp-meta-info" title="email: ErenJaegerKing@qq.com">ErenJaeger</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><!----><a class="route-link auto-link next" href="/notes/devops/%E5%AE%B9%E5%99%A8%E5%8C%96%E3%80%81%E7%BC%96%E6%8E%92/docker_compose_note.html" aria-label="Docker实现SpringBoot项目集群"><div class="hint">下一页<span class="arrow end"></span></div><div class="link">Docker实现SpringBoot项目集群<!----></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper"><div class="vp-footer">Powered by VuePress | Theme Hope</div><div class="vp-copyright">Copyright © 2024 ErenJaegerKing </div></footer></div><!--]--><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-DtXSeWwn.js" defer></script>
  </body>
</html>
