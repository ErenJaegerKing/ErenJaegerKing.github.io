---
icon: ""
description: ""
title: "组合模式"
date: 2024-11-12
category:
  - 设计模式
tag:
  - 结构性模式
  - 组合模式
order: 6
---

---

:::info
设计模式-结构性模式-组合模式
:::

---
### 动机

![](https://drawingbed-686.pages.dev/myblog/202411101621466.png)

组合模式依据树形结构来组合对象，用来表示部分以及整体层次。这种类型的设计模式属于结构型模式，它创建了对象组的树形结构。又名部分整体模式

### 定义

**是用于把一组相似的对象当作一个单一的对象**。

### UML

![](https://drawingbed-686.pages.dev/myblog/202411101620121.png)

### **结构**

组合模式主要包含三种角色：

- **抽象根节点（Component）**：定义系统各层次对象的共有方法和属性，可以预先定义一些默认行为和属性。
- **树枝节点（Composite）**：定义树枝节点的行为，存储子节点，组合树枝节点和叶子节点形成一个树形结构。
- **叶子节点（Leaf）**：叶子节点对象，其下再无分支，是系统层次遍历的最小单位。

### **案例实现**

【例】软件菜单

我们在访问别的一些管理系统时，经常可以看到类似的菜单。一个菜单可以包含菜单项（菜单项是指不再包含其他内容的菜单条目），也可以包含带有其他菜单项的菜单，因此使用组合模式描述菜单就很恰当，我们的需求是针对一个菜单，打印出其包含的所有菜单以及菜单项的名称。

![](https://drawingbed-686.pages.dev/myblog/202411101622469.png)

### 优缺点

- 组合模式可以清楚地定义分层次的复杂对象，表示对象的全部或部分层次，它让客户端忽略了层次的差异，方便对整个层次结构进行控制。
- **简化了客户端代码**
    
    客户端可以一致地使用一个组合结构或其中单个对象，不必关心处理的是单个对象还是整个组合结构
    
- **符合“开闭原则”**
    
    在组合模式中增加新的树枝节点和叶子节点都很方便，无须对现有类库进行任何修改
    
- 组合模式为树形结构的面向对象实现提供了一种灵活的解决方案，通过叶子节点和树枝节点的递归组合，可以形成复杂的树形结构，但对树形结构的控制却非常简单。

### 适用场景

组合模式正是应树形结构而生，所以组合模式的使用场景就是**出现树形结构的地方**。比如：文件目录显示，多级目录呈现等树形结构数据的操作。